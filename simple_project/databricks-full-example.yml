# # yaml-language-server: $schema=bundle_config_schema.json

# # This is a Databricks asset bundle definition for datakickstart_dabs.
# # See https://docs.databricks.com/dev-tools/bundles/index.html for documentation.
# bundle:
#   name: datakickstart_dabs

# workspace:
#   host: https://e2-dogfood.staging.cloud.databricks.com/

# include:
#   - resources/*.yml

# variables:
#   cluster_spark_version:
#     default: "13.3.x-scala2.12"
#   cluster_node_type:
#     default: "i3.xlarge"
#   cluster_min_node:
#     default: "1"
#   cluster_max_node:
#     default: "5"

# definitions:
#   job_clusters: &mycluster
#     - job_cluster_key: my_job_cluster
#       new_cluster:
#         spark_version: ${var.cluster_spark_version}
#         node_type_id: ${var.cluster_node_type}
#         autoscale:
#             min_workers: 1
#             max_workers: 5

# targets:     
#   staging:
#     mode: production
#     workspace:
#       root_path: /Shared/.bundle/${bundle.target}/${bundle.name}
#     run_as:
#       user_name: dustin.vannoy@databricks.com

#   # The 'prod' target, used for production deployment.
#   prod:
#     mode: production
#     workspace:
#       root_path: /Shared/.bundle/${bundle.target}/${bundle.name}
#     run_as:
#       user_name: dustin.vannoy@databricks.com
#     variables:
#       cluster_spark_version: "14.3.x-scala2.12"
#       cluster_node_type: "i3.2xlarge"

# resources:
#   jobs:
#     job1:
#       name: dabs_job_${bundle.target}

#       tasks:
#         - task_key: notebook_task
#           job_cluster_key: my_job_cluster
#           notebook_task:
#             notebook_path: src/notebook.ipynb
#           max_retries: 0
        
#         - task_key: main_task
#           depends_on:
#             - task_key: notebook_task
#           job_cluster_key: my_job_cluster
#           python_wheel_task:
#             package_name: datakickstart_dabs
#             entry_point: main
#           libraries:
#             - whl: dist/*.whl
#           max_retries: 0
#       job_clusters: *mycluster

#     job2:
#       name: dabs_job2_${bundle.target}

#       tasks:
#         - task_key: notebook_task2
#           job_cluster_key: my_job_cluster
#           notebook_task:
#             notebook_path: src/notebook.ipynb
#           max_retries: 0
#       job_clusters: *mycluster
        